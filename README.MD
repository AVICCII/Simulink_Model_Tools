# toto 工具箱

<!-- TOC -->

- [toto 工具箱](#toto-工具箱)
    - [1. 安装说明](#1-安装说明)
    - [2. 使用说明](#2-使用说明)
        - [2.1 ERT](#21-ert)
        - [2.2 AutoSAR](#22-autosar)
        - [2.3 隐藏模块名称](#23-隐藏模块名称)
        - [2.4 隐藏端口名称](#24-隐藏端口名称)
        - [2.5 显示模块名称](#25-显示模块名称)
        - [2.6 显示端口名称](#26-显示端口名称)
        - [2.7 SF变量类型定义](#27-sf变量类型定义)
        - [2.8 添加信号线变量](#28-添加信号线变量)
        - [2.9 勾选resolve](#29-勾选resolve)
        - [2.10 勾选信号广播](#210-勾选信号广播)
        - [2.11 端口重命名](#211-端口重命名)
        - [2.12 清除resolve](#212-清除resolve)
        - [2.13 清除信号广播](#213-清除信号广播)
        - [2.14 p文件生成](#214-p文件生成)
        - [2.15 修改端口属性](#215-修改端口属性)
        - [2.16 恢复端口属性](#216-恢复端口属性)

<!-- /TOC -->

版本| 内容| 修改时间| 修改人
----|---|--------|--------
0.1| 创建文档| 2017/9/12 | 姜世博
0.2|适配toto 0.2，增加自动修改stateflow中，变量数据类型功能| 2017/9/18 | 姜世博
0.3|适配toto 0.3，修改模型配置，ERT和AutoSAR配置脚本升级为v0.9|2017/9/23 | 姜世博
0.4|适配toto 0.4，增加 修改端口属性 和 恢复端口属性两个功能|2017/9/25  | 姜世博
0.5|ERT和AutoSAR配置脚本升级为v0.9.3 |2017/10/10  |姜世博
0.6|适配ERT和AutoSAR配置脚本 v0.9.4，更改 修改端口属性 和 恢复端口属性 两个按钮的策略 |2017/10/16 |姜世博
   |            |           |

--------------------------------------------

## 1. 安装说明

1. 按照下图指示进行安装

![001.jpg](001.jpg)

2. 安装完成后出现如下图标，点开即可使用

![002.jpg](002.jpg)

## 2. 使用说明

toto工具需要在**打开模型**时才能作为辅助工具进行使用，下图为工具界面概览

![003.jpg](003.jpg)

### 2.1 ERT

将所打开的模型配置设为适合生成ERT(Embedded Coder)。

### 2.2 AutoSAR

将所打开的模型配置设为适合生成AutoSAR。

### 2.3 隐藏模块名称

隐藏如下模块的名称：
MinMax,UnitDelay,Sqrt,Merge,Product,Logic,RelationalOperator,Switch,MultiPortSwitch,Goto,From,Terminator,ModelReference

### 2.4 隐藏端口名称

隐藏inport和outport输入输出模块的名称。

### 2.5 显示模块名称

显示可隐藏名称的模块的名字。

### 2.6 显示端口名称

显示inport和outport输入输出模块的名称。

### 2.7 SF变量类型定义

查找stateflow中所有定义的变量，如果为input/output，数据类型就设置为与simulink保持一致；如果为其它形式的变量，则会读取变量名字的末尾，并根据末尾定义成相应的数据类型，如果没有按照命名规范，则会定义成`uint8`的数据类型。

### 2.8 添加信号线变量

会根据信号线上的名字，在matlab workspace中添加相应数据类型的信号变量，自动添加的变量储存类型为Auto，如下为示例，需要注意信号线命名需要符合命名规范，末尾为数据类型简写才能实现此功能。

1. 原模型 

![2_7_001.jpg](2_7_001.jpg)

2. 点击添加信号线变量后

![2_7_002.jpg](2_7_002.jpg)

### 2.9 勾选resolve

在有名字的信号线上勾选`Signal name must resolve to Simulink signal object`选项。

### 2.10 勾选信号广播

勾选信号线`Show propagated signals`选项。

### 2.11 端口重命名

对于inport和outport模块，如果连接的信号线上定义了名字，则将这个端口模块重命名成信号线上定义的名字。

### 2.12 清除resolve

信号线上清除`Signal name must resolve to Simulink signal object`选项的勾选。

### 2.13 清除信号广播

清除信号线`Show propagated signals`选项的勾选。

### 2.14 p文件生成

将当前工作目录下(不包括子目录)，所有.m的脚本文件生成一份.p文件的副本。

### 2.15 修改端口属性

根据端口所连接的信号线上，定义的信号名称，读取该名称末尾数据类型的定义，并根据所读到的数据类型，将inport 和outport端口的 数据维度，数据类型，数据范围，采样时间属性进行修改。

### 2.16 恢复端口属性

将inport和outport端口的数据维度，数据类型，数据范围，采样时间属性设置为默认选项。